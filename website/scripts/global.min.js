
function contactFormValidation(){
	var $contact_message = $('#contact-message');
	var $contact_name = $('#contact-name');
	var $contact_email = $('#contact-email');
	var is_all_info_present = true;
	var is_error_focused = false;
	var email_regex = new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?");
	
	if($contact_message.val() == '' || $contact_message.val() == $contact_message.attr('data-value')) { 
		
		is_all_info_present = false;
		$contact_message.css({borderColor: '#E85F24'});
		is_error_focused = true;
		$contact_message.focus();
	} else { $contact_message.css({borderColor: '#000000'}); }
	
	if($contact_name.val() == '' || $contact_name.val() == $contact_name.attr('data-value')) {
		
		is_all_info_present = false;
		$contact_name.css({borderColor: '#E85F24'});
		if(!is_error_focused) {
			is_error_focused = true;
			$contact_name.focus();
		}
	}else { $contact_name.css({borderColor: '#000000'}); }
	
	if($contact_email.val() == '' || $contact_email.val() == $contact_email.attr('data-value')) {
		
		is_all_info_present = false;
		$contact_email.css({borderColor: '#E85F24'});
		if(!is_error_focused) {
			is_error_focused = true;
			$contact_email.focus();
		}
	}else { $contact_email.css({borderColor: '#000000'}); }
	
	
	if(is_all_info_present) {
		
		console.log($contact_email.val().search(email_regex));
		if($contact_email.val().search(email_regex) == -1) {
			

			$('#chb-contact').animate({height: '575px'}, 400, function() { });
			$('#contact-btn').animate({top: '575px'}, 400, function() {});
			$('#contact-success').hide();
			$('#contact-error-fields').hide();
			$('#contact-error-email').fadeIn();
			$contact_email.css({borderColor: '#E85F24'});
			$contact_email.focus();
			
			return false;
			
		} else { return true; }
		
	} else {
		

		$('#chb-contact').animate({height: '575px'}, 400, function() { });
		$('#contact-btn').animate({top: '575px'}, 400, function() {});
		$('#contact-success').hide();
		$('#contact-error-email').hide();
		$('#contact-error-fields').fadeIn();
		
		
		return false;
	}
}

function clearFormErrors() {
	
	$('#contact-message').css({borderColor: '#000000'});
	$('#contact-name').css({borderColor: '#000000'});
	$('#contact-email').css({borderColor: '#000000'});

	$('#contact-success').fadeOut();
	$('#contact-error-email').fadeOut();
	$('#contact-error-fields').fadeOut();
	$('#chb-contact').css({height: '500px'});
}




function inputBlur(input_value, input_element){
	
	var $this = $('#' + input_element);
	if($this.val() == '') { $this.val(input_value); }
}

function inputFocus(input_value, input_element){
	
	var $this = $('#' + input_element);
	if($this.val() == input_value) { $this.val(''); }
}



$(document).ready(function() {
	
	$('#post-ctn-form-btn').click(contactFormValidation);
	$('#contact-btn-bottom a').removeAttr('href');
	$('#back-top-btn').hide();
	$('#contact-btn').hide();
	
	$('#chb-contact-form').vape();
	
	$('#contact-message').focus(function() { inputFocus($(this).attr('data-value'), 'contact-message'); });
	$('#contact-name').focus(function() { inputFocus($(this).attr('data-value'), 'contact-name'); });
	$('#contact-email').focus(function() { inputFocus($(this).attr('data-value'), 'contact-email'); });
	
	$('#contact-message').blur(function() { inputBlur($(this).attr('data-value'), 'contact-message'); });
	$('#contact-name').blur(function() { inputBlur($(this).attr('data-value'), 'contact-name'); });
	$('#contact-email').blur(function() { inputBlur($(this).attr('data-value'), 'contact-email'); });
	
	
	if($('#contact-btn').hasClass('contact-closed') == false) {
		
		$('#chb-contact').slideDown();
		$('#chb-contact').animate({height: '575px'}, 400, function() { });
		$('#contact-btn').animate({top:'575px'}, 400, function() { $(this).html($(this).attr('data-opened')); });
		$('#contact-btn').removeClass('contact-closed');
		$('#contact-btn').fadeIn();
		if($('#contact-btn').hasClass('show-success')) $('#contact-success').fadeIn();
		else $('#contact-error-email').fadeIn();
	}
	
	
	$(window).scroll(function() {
		
		
		
		if($(window).scrollTop() >= $('#chb-specialties').offset().top) {
			
			$('#chb-topbar-wrapper').addClass('chb-section-shadow');
			$('#back-top-btn').fadeIn();
			$('#contact-btn').fadeIn();
		} else {
			$('#chb-topbar-wrapper').removeClass('chb-section-shadow');
			$('#back-top-btn').fadeOut();
			if($('#contact-btn').hasClass('contact-closed')) $('#contact-btn').fadeOut();
		}
		
		
	/************* Project titles ******************************/
	
	$('.project-title').hover(
		function(){
			var $target = $('h3', this);
			$target.fadeIn('fast')
		},
		function(){
			var $target = $('h3', this);
			$target.fadeOut('fast');
			
		}
	);
				
		

});

	
	/********************************************* SMOOTH SCROLLING NAVBAR MAPPING *********************************************/
	
	$('#chb-logo, #back-top-btn, #back-top-btn a').click(function() {
		
		$('html, body').animate({scrollTop: 0}, '1000');
		return false;
	});
	
	$('#chb-navbar li a').click(function() {
	
		var target = $(this).attr('href');
		$('html, body').animate({scrollTop: $(target).offset().top}, '1000');
		return false;
	});
	
	

	
	
	/*********************************************** CONTACT FORM BUTTON MAPPING ***********************************************/
	
	$('#contact-btn').click(function() {
		
		if($(this).hasClass('contact-closed')) {
		
			$('#chb-contact').slideDown();
			$(this).animate({top:'500px'}, 400, function() { $(this).html($(this).attr('data-opened')); });
			$(this).removeClass('contact-closed');
			$('#contact-btn-bottom button').removeClass('contact-closed');
		} else {
			$('#chb-contact').slideUp();
			$(this).animate({top: 0}, 400, function() { $(this).html($(this).attr('data-closed')); clearFormErrors(); if($(window).scrollTop() < $('#chb-specialties').offset().top) $('#contact-btn').fadeOut(); });
			$(this).addClass('contact-closed');
			$('#contact-btn-bottom button').addClass('contact-closed');
		}
	});
});




(function(e){e.fn.vape=function(i){var g=e.extend({ignore_fields:[":submit",":reset",":button",":file",":password"],fallback_to_cookies:!0,cookie_expires:7},i),k=function(c,b){try{b?localStorage.setItem(c,b):localStorage.removeItem(c)}catch(a){console.log("VAPE ERROR: exceeded data quota")}},j=function(c,b,a){var a=a?a:{},d=b?a.expire:-1;if("number"==typeof d){var f=new Date;f.setTime(f.getTime()+864E4*d);d="; expires="+f.toUTCString()}else d="";var f=a.path?"; path="+a.path:"",e=a.domain?"; domain="+
a.domain:"",a=a.secure?"; secure":"";document.cookie=[c+"=",encodeURIComponent(b),d,f,e,a].join("")},l=function(c){for(var b=document.cookie.split(";"),a=0;a<b.length;a++){var d=b[a].substr(0,b[a].indexOf("=")).replace(/^\s+|\s+$/g,""),e=b[a].substr(b[a].indexOf("=")+1);if(d==c)return unescape(e)}},h=function(c,b){return["vape",c.attr("id"),b.attr("id"),b.attr("name")].join("~")};return this.each(function(){var c=e(this),b;form_inputs=e.merge(c.find("input"),c.find("textarea"));for(var a=0;a<g.ignore_fields.length;a++)form_inputs=
form_inputs.not(g.ignore_fields[a]);b=form_inputs;var a=void 0,d;d="undefined"!==typeof Storage?!0:!1;if(d)a="LOCAL_STORAGE";else{if(d=g.fallback_to_cookies)j("vape_cookie_test","vape"),d=l("vape_cookie_test")?!0:!1;d&&(a="COOKIE_STORAGE")}if(a){var f=a;b.each(function(){var a=e(this),b="",b=h(c,a),b="LOCAL_STORAGE"==f?localStorage.getItem(b)||a.val():l(b)||a.val();a.val(b)});var i=a;b.each(function(){var a=e(this),b=h(c,a);"LOCAL_STORAGE"==i?a.keyup(function(){k(b,a.val())}):a.keyup(function(){j(b,
a.val(),{expires:g.cookie_expires})})});var m=a;c.bind("submit reset",function(){b.each(function(){"LOCAL_STORAGE"==m?k(h(c,e(this))):j(h(c,e(this)))})})}else console.log("VAPE ERROR: we are sorry :( but neither HTML5 localStorage nor cookies can be used")})}})(jQuery);